From 83fd4c4ff8b439e073d40b07cceff5b44f00bcb2 Mon Sep 17 00:00:00 2001
From: ksrt12 <kazakov12stepan2012@live.ru>
Date: Sun, 6 Aug 2017 16:18:34 +0300
Subject: [PATCH] vendor

---
 config/common.mk    | 20 +++-----------------
 config/data_only.mk |  3 +--
 config/telephony.mk |  3 +--
 tools/changelog.sh  |  3 ++-
 tools/rr_variant.sh |  2 ++
 5 files changed, 9 insertions(+), 22 deletions(-)

diff --git a/config/common.mk b/config/common.mk
index 59d97850..d97d4b25 100644
--- a/config/common.mk
+++ b/config/common.mk
@@ -59,7 +59,7 @@ PRODUCT_PROPERTY_OVERRIDES += \
 # Default notification/alarm sounds
 PRODUCT_PROPERTY_OVERRIDES += \
     ro.config.notification_sound=Argon.ogg \
-    ro.config.alarm_alert=Hassium.ogg
+    ro.config.alarm_alert=Huawei_Alarm.ogg
 
 ifneq ($(TARGET_BUILD_VARIANT),user)
 # Thank you, please drive thru!
@@ -79,18 +79,6 @@ PRODUCT_COPY_FILES += \
 PRODUCT_COPY_FILES += \
     vendor/cm/Features.mkdn:system/etc/RR/Features.txt
 
-# NexusLauncher
-PRODUCT_COPY_FILES += \
-    vendor/cm/prebuilt/NexusLauncher/NexusLauncher.apk:system/app/NexusLauncher/NexusLauncher.apk
-
-# Wallpaper
-PRODUCT_COPY_FILES += \
-    vendor/cm/prebuilt/Wallpaper/Wallpaper.apk:system/app/Wallpaper/Wallpaper.apk
-
-# DeskClock
-PRODUCT_COPY_FILES += \
-    vendor/cm/prebuilt/DeskClock/DeskClock.apk:system/app/DeskClock/DeskClock.apk
-
 # DU Utils Library
 PRODUCT_BOOT_JARS += \
     org.dirtyunicorns.utils
@@ -181,15 +169,13 @@ PRODUCT_PACKAGES += \
 # Custom CM packages
 PRODUCT_PACKAGES += \
     ResurrectionOTA \
-    ResurrectionStats \
     Trebuchet \
     AudioFX \
-    CMFileManager \
+    DeskClock \
     Eleven \
     LockClock \
     CMSettingsProvider \
     ExactCalculator \
-    Jelly \
     LiveLockScreenService \
     WeatherProvider \
     OmniStyle \
@@ -312,7 +298,7 @@ DEVICE_PACKAGE_OVERLAYS += vendor/cm/overlay/common
 
 PRODUCT_VERSION = 5.8.4
 ifneq ($(RR_BUILDTYPE),)
-RR_VERSION := RR-N-v$(PRODUCT_VERSION)-$(shell date -u +%Y%m%d)-$(CM_BUILD)-$(RR_BUILDTYPE)
+RR_VERSION := RR-N-v$(PRODUCT_VERSION)-$(shell date -u +%Y%m%d)-$(CM_BUILD)-$(RR_BUILDTYPE)-b$(shell cat logs/.version)
 else
 RR_VERSION := RR-N-v$(PRODUCT_VERSION)-$(shell date -u +%Y%m%d)-$(CM_BUILD)
 endif
diff --git a/config/data_only.mk b/config/data_only.mk
index 55f48c03..6432bb34 100644
--- a/config/data_only.mk
+++ b/config/data_only.mk
@@ -4,5 +4,4 @@ PRODUCT_COPY_FILES += \
 
 # Telephony packages
 PRODUCT_PACKAGES += \
-    Stk \
-    CellBroadcastReceiver
\ No newline at end of file
+    CellBroadcastReceiver
diff --git a/config/telephony.mk b/config/telephony.mk
index 7773067c..f93fc5d0 100644
--- a/config/telephony.mk
+++ b/config/telephony.mk
@@ -9,9 +9,8 @@ PRODUCT_COPY_FILES += \
 # Telephony packages
 PRODUCT_PACKAGES += \
     messaging \
-    Stk \
     CellBroadcastReceiver
 
 # Default ringtone
 PRODUCT_PROPERTY_OVERRIDES += \
-    ro.config.ringtone=Resurrection.mp3
+    ro.config.ringtone=Huawei_Tune_Piano.ogg
diff --git a/tools/changelog.sh b/tools/changelog.sh
index a70e9825..c3589f37 100755
--- a/tools/changelog.sh
+++ b/tools/changelog.sh
@@ -31,6 +31,7 @@ changelog_path_name=CHANGELOG.mkdn #changelog file path/name.extension
 source_name="Resurrection Remix Nougat" #Name to display in changelog.md top before version
 # input variables end
 
+if [ "$dtl" != "0" ];then
 export Changelog=$source_tree/$changelog_path_name
 export Temp_Changelog=$source_tree/$changelog_path_name.temp
 
@@ -87,5 +88,5 @@ then
 	echo "$(cat $Temp_Changelog)\n$(cat $Changelog)" > $Changelog
 	rm -f $Temp_Changelog
 fi
-
+fi
 echo -e ${ylw}"\n √ Changelog successfully generated.\n"${txtrst}
diff --git a/tools/rr_variant.sh b/tools/rr_variant.sh
index 1461b29b..285d8c76 100755
--- a/tools/rr_variant.sh
+++ b/tools/rr_variant.sh
@@ -22,6 +22,7 @@
     blurev=${rev}$(tput setaf 4)
     normal='tput sgr0'
 
+if [ -z "${RR_BUILDTYPE}" ]; then
 echo -e ${ylw}"\n\n ▼ Which build-type do you want to choose?\n"${txtrst}
 echo -e "";
 echo -e ${blu}" 〉 1- Official "${txtrst}${red}"    ︱ Only for the official builds by the maintainers"${txtrst}
@@ -127,3 +128,4 @@ echo -e "";
 $normal
 sleep 1
 fi
+fi
-- 
2.13.0

