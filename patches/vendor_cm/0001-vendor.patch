From aa1c1c343ad3702c05cb98148e0e670c7af86b42 Mon Sep 17 00:00:00 2001
From: ksrt12 <kazakov12stepan2012@live.ru>
Date: Sun, 9 Jul 2017 13:09:19 +0700
Subject: [PATCH] vendor

Signed-off-by: ksrt12 <kazakov12stepan2012@live.ru>
---
 config/common.mk                     | 20 +++-----------------
 config/telephony.mk                  |  2 +-
 prebuilt/Wallpaper/Android.mk        | 10 ++++++++++
 tools/rr_variant.sh                  |  2 ++
 4 files changed, 16 insertions(+), 18 deletions(-)
 create mode 100644 prebuilt/Wallpaper/Android.mk

diff --git a/config/common.mk b/config/common.mk
index 73ee74ea..900b09f3 100644
--- a/config/common.mk
+++ b/config/common.mk
@@ -59,7 +59,7 @@ PRODUCT_PROPERTY_OVERRIDES += \
 # Default notification/alarm sounds
 PRODUCT_PROPERTY_OVERRIDES += \
     ro.config.notification_sound=Argon.ogg \
-    ro.config.alarm_alert=Hassium.ogg
+    ro.config.alarm_alert=Huawei_Alarm.ogg
 
 ifneq ($(TARGET_BUILD_VARIANT),user)
 # Thank you, please drive thru!
@@ -79,18 +79,6 @@ PRODUCT_COPY_FILES += \
 PRODUCT_COPY_FILES += \
     vendor/cm/Features.mkdn:system/etc/RR/Features.txt
 
-# NexusLauncher
-PRODUCT_COPY_FILES += \
-    vendor/cm/prebuilt/NexusLauncher/NexusLauncher.apk:system/app/NexusLauncher/NexusLauncher.apk
-
-# Wallpaper
-PRODUCT_COPY_FILES += \
-    vendor/cm/prebuilt/Wallpaper/Wallpaper.apk:system/app/Wallpaper/Wallpaper.apk
-
-# DeskClock
-PRODUCT_COPY_FILES += \
-    vendor/cm/prebuilt/DeskClock/DeskClock.apk:system/app/DeskClock/DeskClock.apk
-
 # DU Utils Library
 PRODUCT_BOOT_JARS += \
     org.dirtyunicorns.utils
@@ -181,15 +169,13 @@ PRODUCT_PACKAGES += \
 # Custom CM packages
 PRODUCT_PACKAGES += \
     ResurrectionOTA \
-    ResurrectionStats \
     Trebuchet \
     AudioFX \
-    CMFileManager \
+    DeskClock \
     Eleven \
     LockClock \
     CMSettingsProvider \
     ExactCalculator \
-    Jelly \
     LiveLockScreenService \
     WeatherProvider \
     OmniStyle \
@@ -312,7 +298,7 @@ DEVICE_PACKAGE_OVERLAYS += vendor/cm/overlay/common
 
 PRODUCT_VERSION = 5.8.3
 ifneq ($(RR_BUILDTYPE),)
-RR_VERSION := RR-N-v$(PRODUCT_VERSION)-$(shell date -u +%Y%m%d)-$(CM_BUILD)-$(RR_BUILDTYPE)
+RR_VERSION := RR-N-v$(PRODUCT_VERSION)-$(shell date -u +%Y%m%d)-$(CM_BUILD)-$(RR_BUILDTYPE)-b$(shell cat logs/.version)
 else
 RR_VERSION := RR-N-v$(PRODUCT_VERSION)-$(shell date -u +%Y%m%d)-$(CM_BUILD)
 endif
diff --git a/config/telephony.mk b/config/telephony.mk
index 7773067c..2d2cfa31 100644
--- a/config/telephony.mk
+++ b/config/telephony.mk
@@ -14,4 +14,4 @@ PRODUCT_PACKAGES += \
 
 # Default ringtone
 PRODUCT_PROPERTY_OVERRIDES += \
-    ro.config.ringtone=Resurrection.mp3
+    ro.config.ringtone=Huawei_Tune_Piano.ogg
diff --git a/prebuilt/Wallpaper/Android.mk b/prebuilt/Wallpaper/Android.mk
new file mode 100644
index 00000000..11da127b
--- /dev/null
+++ b/prebuilt/Wallpaper/Android.mk
@@ -0,0 +1,10 @@
+LOCAL_PATH := $(call my-dir)
+
+include $(CLEAR_VARS)
+LOCAL_MODULE_TAGS := optional
+LOCAL_MODULE := GoogleWallpaper
+LOCAL_SRC_FILES := Wallpaper.apk
+LOCAL_MODULE_CLASS := APPS
+LOCAL_MODULE_SUFFIX := $(COMMON_ANDROID_PACKAGE_SUFFIX)
+LOCAL_CERTIFICATE := PRESIGNED
+include $(BUILD_PREBUILT)
diff --git a/tools/rr_variant.sh b/tools/rr_variant.sh
index 9dc4984b..adc18c31 100755
--- a/tools/rr_variant.sh
+++ b/tools/rr_variant.sh
@@ -22,6 +22,7 @@
     blurev=${rev}$(tput setaf 4)
     normal='tput sgr0'
 
+if [ -z "${RR_BUILDTYPE}" ]; then
 echo -e ${ylw}"\n\n ▼ Which build-type do you want to choose?\n"${txtrst}
 echo -e "";
 echo -e ${blu}" 〉 1- Official "${txtrst}${red}"    ︱ Only for the official builds by the maintainers"${txtrst}
@@ -127,3 +128,4 @@ echo -e "";
 $normal
 sleep 1
 fi
+fi
-- 
2.13.0

